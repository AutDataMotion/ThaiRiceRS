<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale-1">
<title>找回密码</title>
<link type="text/css" rel="stylesheet" href="${path!}CSS/base.css">
<link type="text/css" rel="stylesheet"
	href="${path!}bootstrap-3.3.7-dist/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet"
	href="${path!}datetime-picker/bootstrap-datetimepicker.min.css">
<link type="text/css" rel="stylesheet"
	href="${path!}CSS/password_getback.css">
<!-- MD5加密 -->
<script type="text/javascript" src="${path!}JS/md5.js"></script>
<script>
function getValidateCode(){	
	var account = document.getElementById("account").value;
	if ("" == account)
	{
		document.getElementById("account").style.backgroundColor = "#faa390";
		alert("“账户名”不能为空，请输入!")
		return;
	}
	$.ajax({
		  type: 'POST',
		  url: '/jf/thairice/t3user/getValidateCode',
		  data: {account:$("#account").val()},
		  success: function(res){
			if(res.code == "0003" || res.code == "0001"){
					document.getElementById("account").style.backgroundColor = "#faa390";
			}
			alert(res.desc);	
		  },
		  dataType: "json"
		});
}

function valiModiPwd(){
	var account = document.getElementById("account").value;
	if ("" == account)
	{
		document.getElementById("account").style.backgroundColor = "#faa390";
		alert("“账户名”不能为空，请输入!")
		return false;
	}
	var identiCode = document.getElementById("identiCode").value;
	if ("" == identiCode)
	{
		document.getElementById("identiCode").style.backgroundColor = "#faa390";
		alert("“验证码”不能为空，请输入!")
		return false;
	}
	var pwd1 = document.getElementById("pwd1").value;
	if ("" == pwd1)
	{
		document.getElementById("pwd1").style.backgroundColor = "#faa390";
		alert("“密码”不能为空，请输入!")
		return false;
	}
	var pwd = document.getElementById("pwd").value;
	if ("" == pwd)
	{
		document.getElementById("pwd").style.backgroundColor = "#faa390";
		alert("“密码确认”不能为空，请输入!")
		return false;
	}
/* 	var pwd2=document.getElementById("pwd").value;
	var pwd1=document.getElementById("pwd1").value;	 */
 	if(pwd==pwd1){

	} else {
		document.getElementById("pwd1").style.backgroundColor = "#faa390";
		document.getElementById("pwd").style.backgroundColor = "#faa390";
		alert("两次输入密码不一致，请重新输入！");
		return;
	}
 	// 加密密码
 	var hash_pwd = hex_md5(pwd1);
/*  	// 加密验证码
 	var hash_identiCode = hex_md5(identiCode); */
	$.ajax({
		  type: 'POST',
		  url: '/jf/thairice/t3user/valiModiPwd',
		  data: {identiCode:identiCode,pwd:hash_pwd,account:$("#account").val()},
		  success: function(res){
/* 			  if(res.code==1){
				  alert(res.desc);	
//				  window.location.href="/jf/thairice/t3user/main";
				}else{
					alert(res.desc);	
				} */
			if(res.code == "0003" || res.code == "0001"){
				document.getElementById("account").style.backgroundColor = "#faa390";
			} else 	if(res.code == "0004" || res.code == "0009"){
				document.getElementById("pwd1").style.backgroundColor = "#faa390";
				document.getElementById("pwd").style.backgroundColor = "#faa390";
			} else 	if(res.code == "0005"){
				document.getElementById("identiCode").style.backgroundColor = "#faa390";
			}
			alert(res.desc);	
		  },
		  dataType: "json"
		});
}

</script>
</head>

<body
	style="background: url(${path!}Images/register/section4_bg.jpg) no-repeat center center;">
	<div class="BbPasswordWrap">
		<div class="BbPassword">
			<h2></h2>
			<div class="container">
				<form class="form-horizontal"
					style="width: 800px; margin: 0 auto; padding-bottom: 20px;">
					<p class="title">< Forget password ></p>
					<div class="form-group" style="margin-top: 20px;">
						<label class="col-sm-2 control-label">Step-1</label>
						<div class="col-sm-8">
							<p style="text-align: left; margin-bottom: 0;">Authenticate</p>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label"></label>
						<div class="col-sm-8">
							<input type="text" class="form-control" id="account"
								name="account" placeholder="Input your account">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label"></label>
						<div class="col-sm-8" style="position: relative;">
							<input type="text" class="form-control" id="identiCode"
								name="identiCode"
								placeholder="The authentication code will send to your e-mail"><span
								class="get_code"><a href='javascript:getValidateCode()'>Get
									code</a></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">Step-2</label>
						<div class="col-sm-8">
							<p style="text-align: left; margin-bottom: 0;">Reset Passward</p>
						</div>
					</div>

					<div class="form-group">
						<label class="col-sm-2 control-label"></label>
						<div class="col-sm-8">
							<input type="password" class="form-control" id="pwd1" name="pwd1"
								placeholder="The Passward is made up of 6 to 12 letters and Numbers">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label"></label>
						<div class="col-sm-8">
							<input type="password" class="form-control" id="pwd" name="pwd"
								placeholder="Verify password">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label"></label>
						<div class="col-sm-8">
							<div class="form-group" style="text-align: center;">
								<button type="button"
									class="btn btn-primary btn-lg password_getback"
									onclick="javascript:valiModiPwd()">Modified to
									complete</button>
							</div>
						</div>
					</div>

				</form>
			</div>

		</div>
	</div>
	<script src="${path!}JS/jquery-2.0.0.min.js"></script>
	<script src="${path!}bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	<script src="${path!}datetime-picker/moment.js"></script>
	<script src="${path!}datetime-picker/bootstrap-datetimepicker.min.js"></script>
	<script>
	$(function () {  
		//日期选择插件
		$('#starttime').datetimepicker({  
			format: 'YYYY-MM-DD',  
			locale: moment.locale('zh-cn')  
		}); 
		$('#endtime').datetimepicker({  
			format: 'YYYY-MM-DD',  
			locale: moment.locale('zh-cn')  
		});
		$('.btn_selfinfo').click(function(e) {
            $('.form_selfinfo').hide();
			$('.form_serviceinfo').show();
        });
	});
</script>
</body>
</html>
