<% var cssSec={ %>
<style>
</style>
<% }; %> <% var contSec={ %>
	<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
	<%for(var i = 0; i < groupCpu; i++){ %>
	<div id="mainCpu${i}" style="height: 300px"></div>
	<% }%>
	
	<div id="mainDisk" style="height: 400px"></div>
	
<% }; %> <% var jsSec={ %>
	<!-- ECharts单文件引入 -->
	<script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
	<script type="text/javascript">
		// 路径配置
		require.config({
			paths : {
				echarts : 'http://echarts.baidu.com/build/dist'
			}
		});
		 // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar', // 使用柱状图就加载bar模块，按需加载
                 'echarts/chart/gauge', // pie
                  'echarts/chart/pie' // pie
            ],
            function (ec) {
            	
            	var cpuTitle = {
        		        text: 'CPU monitor',
        		        textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
    	                    fontWeight: 'bolder',
    	                    fontSize: 18,
    	                    fontStyle: 'italic',
    	                    color: '#fff',
    	                    shadowColor : '#fff', //默认透明
    	                    shadowBlur: 10
    	                },
        		        x: 'center'
        		    }// end cpuTitle
        		    
        		    function seriesItem(i, acenterX, aradius)  {
            			return {
            				name:'CPU-'+i,
        	            type:'gauge',
        	            center : [acenterX+'%', '55%'],    // 默认全局居中
        	            radius : aradius+'%',
        	            min:0,
        	            max:100,
        	            splitNumber:10,
        	            axisLine: {            // 坐标轴线
        	                lineStyle: {       // 属性lineStyle控制线条样式
        	                    color: [[0.2, 'lime'],[0.6, '#1e90ff'],[0.8, 'orange'],[1, '#ff4500']],
        	                    width: 3,
        	                    shadowColor : '#fff', //默认透明
        	                    shadowBlur: 10
        	                }
        	            },
        	            axisLabel: {            // 坐标轴小标记
        	                textStyle: {       // 属性lineStyle控制线条样式
        	                    fontWeight: 'bolder',
        	                    color: '#fff',
        	                    shadowColor : '#fff', //默认透明
        	                    shadowBlur: 10
        	                }
        	            },
        	            axisTick: {            // 坐标轴小标记
        	                length :15,        // 属性length控制线长
        	                lineStyle: {       // 属性lineStyle控制线条样式
        	                    color: 'auto',
        	                    shadowColor : '#fff', //默认透明
        	                    shadowBlur: 10
        	                }
        	            },
        	            splitLine: {           // 分隔线
        	                length :25,         // 属性length控制线长
        	                lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
        	                    width:3,
        	                    color: '#fff',
        	                    shadowColor : '#fff', //默认透明
        	                    shadowBlur: 10
        	                }
        	            },
        	            pointer: {           // 分隔线
        	                shadowColor : '#fff', //默认透明
        	                shadowBlur: 5
        	            },
        	            title : {
        	                textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
        	                    fontWeight: 'bolder',
        	                    fontSize: 15,
        	                    fontStyle: 'italic',
        	                    color: '#fff',
        	                    shadowColor : '#fff', //默认透明
        	                    shadowBlur: 10
        	                }
        	            },
        	            detail : {
        	                backgroundColor: 'rgba(30,144,255,0.8)',
        	                borderWidth: 0.5,
        	                borderColor: '#fff',
        	                shadowColor : '#fff', //默认透明
        	                shadowBlur: 5,
        	                offsetCenter: [0, '50%'],       // x, y，单位px
        	                textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
        	                    fontWeight: 'bolder',
        	                    color: '#fff'
        	                }
        	            },
        	            data:[{value: 20, name: 'rate'}]
            			}
            	} // end seriesItem
            
                // 基于准备好的dom，初始化echarts图表
            	<%for(var i = 0; i < groupCpu; i++){ %>
            	 var myChart${i} = ec.init(document.getElementById('mainCpu${i}'));
            	var option${i} = {
                	    backgroundColor: '#1b1b1b',
                	    tooltip : { formatter: "{a} <br/>{c} {b}" },
                	    title : cpuTitle,
                	    toolbox: { show : false},
                	    series : [
                	    	seriesItem(0, 15, 65),
                	    	seriesItem(1, 38, 65),
                	    	seriesItem(2, 62, 65),
                	    	seriesItem(3, 85, 65)
                	    ]
            	};
            	 <% }%>
                
                var myChartDisk = ec.init(document.getElementById('mainDisk'));
                	//clearInterval(timeTicket);
                	var optionArray = [];
                	timeTicket = setInterval(function (){
                		// ajax获取cpu信息
                		<%for(var i = 0; i < groupCpu; i++){ %>
                		option${i}.series[0].data[0].value = (Math.random()*100).toFixed(2) - 0;
                	    option${i}.series[1].data[0].value = (Math.random()*100).toFixed(2) - 0;
                	    option${i}.series[2].data[0].value = (Math.random()*100).toFixed(2) - 0;
                	    option${i}.series[3].data[0].value = (Math.random()*100).toFixed(2) - 0;
                	    optionArray.push(option${i});
                	    myChart${i}.setOption(option${i},true);
                	    <% }%>
                	    
                	    // 获取网络信息
                	   
                	},4000);
                	
                	// 磁盘信息 只有页面加载时初始化一次
                	var labelTop = {
                		    normal : {
                		        label : {
                		            show : true,
                		            position : 'center',
                		            formatter : '{b}',
                		            textStyle: {
                		                baseline : 'bottom'
                		            }
                		        },
                		        labelLine : {
                		            show : false
                		        }
                		    }
                		};
                		var labelFromatter = {
                		    normal : {
                		        label : {
                		            formatter : function (params){
                		                return 100 - params.value + '%'
                		            },
                		            textStyle: {
                		                baseline : 'top'
                		            }
                		        }
                		    },
                		}
                		var labelBottom = {
                		    normal : {
                		        color: '#ccc',
                		        label : {
                		            show : true,
                		            position : 'center'
                		        },
                		        labelLine : {
                		            show : false
                		        }
                		    },
                		    emphasis: {
                		        color: 'rgba(0,0,0,0)'
                		    }
                		};
                		var radius = [40, 55];
                		option2 = {
                		    legend: {
                		        x : 'center',
                		        y : 'center',
                		        data:[
                		            'disk1','disk2','disk3','disk','disk',
                		            'disk', 'disk', 'disk', 'disk', 'disk'
                		        ]
                		    },
                		    title : {
                		        text: 'disk monitor',
                		        subtext: 'local',
                		        x: 'center'
                		    },
                		    toolbox: {
                		        show : true,
                		        feature : {              		       
                		            saveAsImage : {show: true}
                		        }
                		    },
                		    series : [
                		        {
                		            type : 'pie',
                		            center : ['10%', '30%'],
                		            radius : radius,
                		            x: '0%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:46, itemStyle : labelBottom},
                		                {name:'disk1', value:54,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['30%', '30%'],
                		            radius : radius,
                		            x:'20%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:56, itemStyle : labelBottom},
                		                {name:'disk2', value:44,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['50%', '30%'],
                		            radius : radius,
                		            x:'40%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:65, itemStyle : labelBottom},
                		                {name:'disk3', value:35,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['70%', '30%'],
                		            radius : radius,
                		            x:'60%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:70, itemStyle : labelBottom},
                		                {name:'disk4', value:30,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['90%', '30%'],
                		            radius : radius,
                		            x:'80%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:73, itemStyle : labelBottom},
                		                {name:'disk', value:27,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['10%', '70%'],
                		            radius : radius,
                		            y: '55%',   // for funnel
                		            x: '0%',    // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:78, itemStyle : labelBottom},
                		                {name:'disk', value:22,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['30%', '70%'],
                		            radius : radius,
                		            y: '55%',   // for funnel
                		            x:'20%',    // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:78, itemStyle : labelBottom},
                		                {name:'disk', value:22,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['50%', '70%'],
                		            radius : radius,
                		            y: '55%',   // for funnel
                		            x:'40%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:78, itemStyle : labelBottom},
                		                {name:'disk', value:22,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['70%', '70%'],
                		            radius : radius,
                		            y: '55%',   // for funnel
                		            x:'60%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:83, itemStyle : labelBottom},
                		                {name:'disk', value:17,itemStyle : labelTop}
                		            ]
                		        },
                		        {
                		            type : 'pie',
                		            center : ['90%', '70%'],
                		            radius : radius,
                		            y: '55%',   // for funnel
                		            x:'80%', // for funnel
                		            itemStyle : labelFromatter,
                		            data : [
                		                {name:'other', value:89, itemStyle : labelBottom},
                		                {name:'disk', value:11,itemStyle : labelTop}
                		            ]
                		        }
                		    ]
                		};
                		myChartDisk.setOption(option2,true);  
            }
        );
	</script>
<% }; %> <%
include("../layout.html",{cssSec:cssSec,contSec:contSec,jsSec:jsSec}){}
%>