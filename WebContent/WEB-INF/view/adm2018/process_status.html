<% var cssSec={ %>
<link href="${cxt!}/ui/rapido/assets/css/styles.css" rel="stylesheet">
<style>
.text-extra-large {
    font-size: 34px !important;
}

.panel-title {
    font-size: 24px;
}

.btn-stop {
	position:relative;
	line-height:40px;
	border-radius:5px;
	color:#fff;
	font-size:20px;
	text-align:center;
	cursor:pointer;
	box-shadow:0 1px 2px rgba(0,0,0,.3);
	overflow:hidden;
	background-image: -webkit-gradient(linear,left top,left bottom,from(#748ea0),to(#0685b4));
    opacity: 1;
    border: 1px solid rgb(46, 206, 206);
}

.breathe-btn {
	position:relative;
	line-height:40px;
	border:1px solid #2b92d4;
	border-radius:5px;
	color:#fff;
	font-size:20px;
	text-align:center;
	cursor:pointer;
	box-shadow:0 1px 2px rgba(0,0,0,.3);
	overflow:hidden;
	background-image:-webkit-gradient(linear,left top,left bottom,from(#6cc3fe),to(#21a1d0));
	-webkit-animation-timing-function:ease-in-out;
	-webkit-animation-name:breathe;
	-webkit-animation-duration:2700ms;
	-webkit-animation-iteration-count:infinite;
	-webkit-animation-direction:alternate;
}
.block1 {
    display: block;
}
@-webkit-keyframes breathe {
	0% {
		opacity:.2;
		box-shadow:0 1px 2px rgba(255,255,255,0.1);
	}
	100% {
		opacity:1;
		border:1px solid rgba(59,235,235,1);
		box-shadow:0 1px 30px rgba(59,255,255,1);
}

</style>
<% }; %> <% var contSec={ %>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->

<div class="toolbar row">
	<div class="col-lg-12 col-md-12 hidden-xs">
		<div class="page-header center">
			<h2>
				Processing Status of Each Batch of Data 
			</h2>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-6 col-md-12 ">
		<div class="panel panel-blue">
			<div class="panel-heading border-light">
				<h2 class="panel-title center">Preprocess </h2>
			</div>
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Status</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div id="pre-btn" class="col-xs-12 text-center no-padding btn-stop">
							<span id="pre-text" class="text-bold block1 text-extra-large">Waiting</span>
					</div>
				</div>
			</div>
			
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Statistics</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="pre-todo" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">To Do</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="pre-suc" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">Successful</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<span id="pre-fail" class="text-bold block1 text-extra-large">0</span> <span
							class="text-light">Failed</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="col-lg-6 col-md-12 ">
		<div class="panel panel-blue">
			<div class="panel-heading border-light">
				<h2 class="panel-title center">Drought</h2>
			</div>
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Status</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div id="drought-btn" class="col-xs-12 text-center no-padding  btn-stop">
							<span id="drought-text" class="text-bold block1 text-extra-large">Waiting</span>
					</div>
				</div>
			</div>
			
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Statistics</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="drought-todo" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">To Do</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="drought-suc" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">Successful</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<span id="drought-fail" class="text-bold block1 text-extra-large">0</span> <span
							class="text-light">Failed</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="col-lg-6 col-md-12 ">
		<div class="panel panel-blue">
			<div class="panel-heading border-light">
				<h2 class="panel-title center">Growth</h2>
			</div>
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Status</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div id="growth-btn" class="col-xs-12 text-center no-padding  btn-stop">
							<span id="growth-text" class="text-bold block1 text-extra-large">Waiting</span>
					</div>
				</div>
			</div>
			
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Statistics</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="growth-todo" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">To Do</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="growth-suc" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">Successful</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<span id="growth-fail" class="text-bold block1 text-extra-large">0</span> <span
							class="text-light">Failed</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	
<div class="col-lg-6 col-md-12 ">
		<div class="panel panel-blue">
			<div class="panel-heading border-light">
				<h2 class="panel-title center">Yield</h2>
			</div>
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Status</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div id="yield-btn" class="col-xs-12 text-center no-padding  btn-stop">
							<span id="yield-text" class="text-bold block1 text-extra-large">Waiting</span>
					</div>
				</div>
			</div>
			
			<div class="panel-body no-padding">
				<div class="padding-10">
					<h4 class="no-margin inline-block padding-5">Statistics</h4>
				</div>
				<div class="clearfix padding-5 space5">
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="yield-todo" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">To Do</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<div class="border-right border-dark">
							<span id="yield-suc" class="text-bold block1 text-extra-large">0</span> <span
								class="text-light">Successful</span>
						</div>
					</div>
					<div class="col-xs-4 text-center no-padding">
						<span id="yield-fail" class="text-bold block1 text-extra-large">0</span> <span
							class="text-light">Failed</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<% }; %> <% var jsSec={ %> 

<script type="text/javascript">
	
	function updateData(idpre, data){
		var status =  data.status;
	
		console.log("data.status:"+data.status)
		if($('#'+idpre+"-btn").hasClass("breathe-btn")){
			
			console.log("hasClass breath")
			// 正在运行
			if(data.status == 1){
				console.log("data.status == 1");
			} else {
				console.log("data.status != 1");
				// 改状态				
				$('#'+idpre+"-btn").removeClass("breathe-btn");
				$('#'+idpre+"-btn").addClass("btn-stop");
				$('#'+idpre+"-text").text("Waiting");
			}
			// 
			$('#'+idpre+"-todo").text(data.cntTodo);
			$('#'+idpre+"-suc").text(data.cntSuc);
			$('#'+idpre+"-fail").text(data.cntFailed);
		} else {
			// 停止状态
				console.log("no Class breath")
			if(data.status == 1){
				console.log("data.status == 1");
				// 改状态				
				$('#'+idpre+"-btn").removeClass("btn-stop");
				$('#'+idpre+"-btn").addClass("breathe-btn");
				$('#'+idpre+"-text").text("Running");
				// 
				$('#'+idpre+"-todo").text(data.cntTodo);
				$('#'+idpre+"-suc").text(data.cntSuc);
				$('#'+idpre+"-fail").text(data.cntFailed);
			} else {
				console.log("data.status != 1");
			}
		}
	}
	var timeTicket = setInterval(function (){
   	 // 发送查询请求
   		$.ajax({
   			type : "get",
   			url : encodeURI(encodeURI(cxt + "/jf/thairice/t2syslog/ajaxProcessStatusData")),
   			dataType : 'json',
   			contentType : "application/json",
   			success : function(rsp) {
   				console.log(rsp);
   				updateData("pre", rsp[0]);
   				updateData("drought", rsp[1]);
   				updateData("growth", rsp[2]);
   				updateData("yield", rsp[3]);
   			}
   		});
   	},2000);
		</script>
<% }; %> <%
include("layout.html",{cssSec:cssSec,contSec:contSec,jsSec:jsSec}){} %>
