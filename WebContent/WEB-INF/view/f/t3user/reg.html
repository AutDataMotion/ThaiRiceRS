<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale-1">
<title>注册</title>
<link type="text/css" rel="stylesheet" href="${cxt!}/ui/thairice/CSS/base.css">
<link type="text/css" rel="stylesheet" href="${cxt!}/ui/thairice/bootstrap-3.3.7-dist/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="${cxt!}/ui/thairice/datetime-picker/bootstrap-datetimepicker.min.css">
<link type="text/css" rel="stylesheet" href="${cxt!}/ui/thairice/CSS/register.css">
<link type="text/css" rel="stylesheet" href="${cxt!}/ui/thairice/CSS/bootstrapValidator.css">
<style type="text/css">
.fw{margin-top: 20px;}
/*.list{padding: 10px;}
.list .item{border-bottom: 1px dashed darkgray;padding: 10px;}*/
.del1{color: red;}
.nowrap {
         text-overflow: ellipsis; /* for IE */
         -moz-text-overflow: ellipsis; /* for Firefox,mozilla */
         overflow: hidden;
         white-space: nowrap;
         border: 1px solid;
         text-align: left; 
     }
.nowrap:hover{
    overflow: visible;
    white-space: normal;
}
.f{display: flex;text-align:left;}
.f .c{flex: 1;text-align:left;}
</style>
</head>

<body
	style="background: url(${cxt!}/ui/thairice/Images/register/section4_bg.jpg) no-repeat center center;">
	<div class="BbRegisterWrap">
		<div class="BbRegister">
			<h2></h2>
			<div class="container">
				<form id="fm" class="form-horizontal"
					style="width: 839px; margin: 0 auto;" method="post">
					<div class="form_selfinfo">
						<p class="title">Create an Account</p>
					<div class="form-group">
						<label class="col-sm-2 control-label">* Account</label>
							<div class="col-sm-8">
								<input type="text" class="form-control"
									placeholder="The Account is made up of 6 to 12 letters or Numbers"
									name="t3user.account">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">* Password</label>
							<div class="col-sm-8">
								<input type="password" class="form-control"
									placeholder="The Password contains at least 2 kinds of letters, numbers and symbols"
									id="pwd" name="t3user.pwd">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">* Verify password</label>
							<div class="col-sm-8">
								<input type="password" class="form-control" id="confirmPass"
									placeholder="Re-enter password" name="confirmPass">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">* Mobile</label>
							<div class="col-sm-8">
								<input type="text" class="form-control"
									placeholder="The Mobile Phone begins with 0 and the length is 10"
									name="t3user.phone">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">* Email</label>
							<div class="col-sm-8">
								<input id="email" type="email" class="form-control"
									placeholder="Your Email like someone@exmaple.com"
									name="t3user.email">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">* Nickname</label>
							<div class="col-sm-8">
								<input type="text" class="form-control"
									placeholder="Your nickname" name="t3user.name_">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Organization</label>
							<div class="col-sm-8">
								<input type="text" class="form-control"
									placeholder="Your current job" name="t3user.company">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Zip code</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" placeholder="Zip code"
									name="t3user.zip_encode">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Address</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" placeholder="Your common working address"
									name="t3user.address">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Industry</label>
							<div class="col-sm-8">
								<input type="text" class="form-control"
									placeholder="Your industry" name="t3user.industry">
							</div>
						</div>
						<div class="form-group" style="margin-top: 25px;">
							<p>
								<button type="button"
								class="btn btn-primary btn-lg btn_selfinfo">Next step >></button> 
							</p>
						</div>
						<div class="form-group">
							<p class="account_in">
								Already have an account? <a href="${cxt!}/jf/thairice/t3user/login?returnUrl=/jf/thairice/t3user/exit#page4">Sign
									In</a>
							</p>
						</div>
					</div>
					<div class="form-horizontal form_serviceinfo"
						style="width: 801px; margin: 0 auto;">
						<p class="title">Create account- Service information</p>
						<div class="form-group" style="margin-top: 20px;">
							<label class="col-sm-2 control-label">*&nbsp&nbsp&nbsp&nbsp&nbspSelect Area</label>
							<div class="col-sm-8">
	                               <button type="button" class="btn btn-primary btn-lg" data-toggle="modal"   data-target="#systemModal">Add Area</button>
							</div>
						</div>
						<div class="form-group" style="margin-top: 20px;">
							<label class="col-sm-2 control-label">&nbsp&nbsp&nbsp&nbsp&nbsp</label>
							<div class="col-sm-8">
								<table class="table table-bordered" name="area" style="table-layout:fixed">
									<thead>
									<tr>
										<th>Province</th>
										<th>District</th>
										<th>Subdistrict</th>
										<th style="width:80px">Operation</th>
									</tr>
									</thead>
									<tbody class="list">
									</tbody>
								</table>
							</div>
						</div>
						<div class="form-group" style="margin-top: 20px;">
							<label class="col-sm-2 control-label">*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProducts</label>
							<div class="col-sm-10 service">
							    <div class="f" style="padding-right: 98px;">
							    <div class="c"><label><input type="checkbox" value="01" name="PD_TpCd">Rice acreage</label></div>
							    <div class="c"><label><input type="checkbox" value="02" name="PD_TpCd">Rice growth</label></div>
							    <div class="c"><label><input type="checkbox" value="03" name="PD_TpCd">Rice yield</label></div>
							    <div class="c"><label><input type="checkbox" value="04" name="PD_TpCd">Rice drought</label></div>
							    </div>
							</div>
						</div>
						<div class="form-group" style="margin-top: 20px;">
							<label class="col-sm-2 control-label">*&nbsp&nbspService Term</label>
							<div class="col-sm-9">
							    <div class="col-sm-1" style="text-align: left;margin-left: -14px;"> 
									<label class="control-label">From</label>
								</div> 
								<div class="col-sm-4">
									<div class="input-group date" id="Prdt_EfDt1">
										<input type="text" class="form-control"  name="Prdt_EfDt">
										<span class="input-group-addon"><i
											class="glyphicon glyphicon-calendar"></i></span>
									</div>
								</div>
								<div class="col-sm-1" style="text-align: center;">
									<label class="control-label">To</label>
								</div>
								<div class="col-sm-4">
									<div class="input-group date" id='PD_ExDat1'>
										<input type="text" class="form-control" name="PD_ExDat">
										<span class="input-group-addon"><i
											class="glyphicon glyphicon-calendar"></i></span>
									</div>
								</div>
							</div>
						</div>
						<div class="fw"> <input type="checkbox" id="agree">&nbsp&nbsp<a onclick="privacy()">I have read and agree to the relevant terms of service and privacy policy</a></div>
						<div class="form-group" style="margin: 35px 0 0;">
							<p>
							    <button type="button"  class="btn btn-primary btn-lg" id="previous" style="margin-right: 50px;" > << Previous step</button>
								<button type="button" class="btn btn-primary btn-lg"
									onclick="submitForm()">Create Account</button>
							</p>
						</div>
						<div class="form-group">
							<p class="account_in">
								Already have an account? <a href="${cxt!}/jf/thairice/t3user/login?returnUrl=/jf/thairice/t3user/exit#page4">Sign
									In</a>
							</p>
						</div>
					</div>
					<input type="hidden" name="t3user.heading">
				</form>
			</div>

		</div>
	</div>
	
	<div class="modal fade" id="systemModal" tabindex="-1" role="dialog" aria-labelledby="systemModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="width: 800px;height:900px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Select Area</h5>
                <button class="close" type="button"  data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">
            <div id="custom_data">
				<span style="width: 230px;display:inline-block;">Province</span><span style="width: 230px;display:inline-block;">District</span><span style="width: 220px;display:inline-block;">Subdistrict</span><br>
				<select class="province" id="province" style="padding: 7px;width: 220px;" onchange="addCityArea('city')"></select>
				<select class="city" id="city" style="padding: 7px;width: 220px;" onchange="addCityArea('area')"></select>
				<select class="area" id="area" style="padding: 7px;width: 220px;"></select>
            </div>
            </div>
            <div class="modal-footer" style="text-align:center;">
                <a class="btn btn-primary go_btn"  type="button"  id="add">Confirm</a>
            </div>
        </div>
    </div>
   </div>
	
	<script src="${cxt!}/ui/thairice/JS/jquery.min.js"></script>
	<script src="${cxt!}/ui/thairice/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	<script src="${cxt!}/ui/thairice/datetime-picker/moment.js"></script>
	<script src="${cxt!}/ui/thairice/datetime-picker/bootstrap-datetimepicker.min.js"></script>
	<script src="${cxt!}/ui/thairice/JS/bootstrapValidator.js"></script>
	<script type="text/javascript" src="${cxt!}/ui/thairice/JS/layer/layer.js"></script>
	<script type="text/javascript" src="${cxt!}/ui/thairice/JS/md5.js"></script>
	<script src="${cxt!}/ui/thairice/JS/index.js"></script>
    <script src="${cxt!}/ui/thairice/area/jquery.cxselect.js"></script>
	<script src="${cxt!}/ui/thairice/common.js"></script>
	<script type="text/javascript">
		sendAjax("${cxt!}/jf/thairice/t3user/province",null,function (res) {
		   /*$('#custom_data').cxSelect({
			    selects: ['province', 'city', 'area'],
			    required: true,
			    jsonValue: 'v',
			   data: res
			   });*/

			var optionstring = "<option value=\"\" >Please Select</option>";
			$.each(res, function(i,item){
				optionstring += "<option value=\"" + item.id + "\" >" + item.name + "</option>";
			});
			$("#province").html(optionstring);
        sendAjax("${cxt!}/jf/thairice/t3user/cityArea",{id:''},function (res) {
            var optionstring = "";
            optionstring += "<option value=\"\" >Please Select</option>";
            $.each(res, function(i,item){
                optionstring += "<option value=\"" + item.id + "\" >" + item.name + "</option>";
            });
            $("#city").html(optionstring);
        });
        sendAjax("${cxt!}/jf/thairice/t3user/cityArea",{id:''},function (res) {
            var optionstring = "";
            optionstring += "<option value=\"\" >Please Select</option>";
            $.each(res, function(i,item){
                optionstring += "<option value=\"" + item.id + "\" >" + item.name + "</option>";
            });
            $("#area").html(optionstring);
        });
	   });
	function addCityArea(type) {
	    if(type=="city"){
            $("#city").html("<option value=\"\" >All</option>");
            $("#area").html("<option value=\"\" >All</option>");
            sendAjax("${cxt!}/jf/thairice/t3user/cityArea",{id:$('#province').val()},function (res) {
                var optionstring = "";
                optionstring += "<option value=\"\" >All</option>";
                $.each(res, function(i,item){
                    optionstring += "<option value=\"" + item.id + "\" >" + item.name + "</option>";
                });
                $("#city").html(optionstring);
            });
		}else if(type=="area"){
			$("#area").html("");
            sendAjax("${cxt!}/jf/thairice/t3user/cityArea",{id:$('#city').val()},function (res) {
                var optionstring = "";
                optionstring += "<option value=\"\" >All</option>";
                $.each(res, function(i,item){
                    optionstring += "<option value=\"" + item.id + "\" >" + item.name + "</option>";
                });
                $("#area").html(optionstring);
            });
        }
    }
	   var all='';
	   $("#add").click(function(){
		   var province=$('#province').val();
		   if(province==""){
			   layer.msg("Please choose the Province first ");
			   return false;
		   }
		   if(all==1){
			   layer.msg("You have added the area");
			   return false;
		   }
		   all=province;
		   var province=$('#province').val();
           var city=$('#city').val();
           var area=$('#area').val();
		   //判断选择是否重复
		   var ret = true;
           $('.item').each(function(){//循环已经选过的服务
			   var p=$(this).find('#p').attr("type");
			   var c=$(this).find('#c').attr("type");
			   var a=$(this).find('#a').attr("type");
			   console.log(province+"==="+p+"===="+city+"==="+c+"===="+area+"==="+a);
			   //增加省份和全选的重复
/* 			   if(p!=""){
				    if(province=="ALL"){
                       ret= false;
					}
				} */
			   //**********************************
				if(province==p && city==c && area==a){
                    ret= false;
				}
				if(province==p){
				    if(c=="" && city!=""){
                        ret= false;
					}
				    if(c!="" && city==""){
                        ret= false;
					}
				}
				if(province==p){
				    if(city==c){
				        if(a=="" && area!=""){
                            ret= false;
						}
				        if(a!="" && area==""){
                            ret= false;
						}
					}
				}
           });
           if(!ret){
               layer.msg("You have added the area");
               return false;
           }
		   var result='<tr class="item">'+
               '<td class="nowrap" id="p" type='+$('#province').val()+'>'+$('#province option:selected').text()+'</td>'+
			   '<td class="nowrap" id="c" type='+$('#city').val()+'>'+$('#city option:selected').text()+'</td>'+
			   '<td class="nowrap" id="a" type='+$('#area').val()+'>'+$('#area option:selected').text()+'</td>'+
			   '<td class="del1" style="cursor:pointer"onclick="del(this)">Delete</td>'+
           '</tr>';
	       $('.list').append(result);
		   $("#systemModal").modal("hide");
		/*    layer.msg('Add successful, you can continue to add', {icon: 1}); */
	   })
	   function del(obj){
		 //询问框
	    	layer.confirm('Please confirm whether the record is deleted', {
	    		title: ['Tips'],btn: ['OK','Cancel'] //按钮
	    	}, function(){
	    		all='';
	          	$(obj).parent().remove();
	          	layer.closeAll();
	    	}, function(){
	    	});
	     }
	function privacy(){
		layer.open({
			type : 2,
			title : '<b>User agreements</b>',
			shadeClose : true,
			maxmin : true, // 开启最大化最小化按钮
			shade : 0.8,
			area : [ '65%', '95%' ],
			content : '${cxt!}/jf/thairice/t3user/privacy'
		});
	}
	</script>
</body>
</html>
